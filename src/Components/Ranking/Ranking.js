import { useEffect, useState } from "react";
import styled from "styled-components";
import { UseAuth } from "../../context/AuthProvaider/UseAuth";
import { Api } from "../../services/Api";
import Header from "../header/Header";
import HeaderLogin from "../header/HeaderLogin";

export default function Ranking() {
  const [rank, setRank] = useState();
  const auth = UseAuth();

  useEffect(() => {
    Api.get("/ranking")
      .then((response) => setRank(response.data))
      .catch((err) => {
        console.error("ops! ocorreu um erro" + err);
      });
  }, []);

  return (
    <div>
      {auth.user ? <Header /> : <HeaderLogin />}
      <SVG
        width="216"
        height="50"
        viewBox="0 0 216 50"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M69.168 41V15.8H80.508C82.116 15.8 83.568 16.148 84.864 16.844C86.184 17.54 87.216 18.5 87.96 19.724C88.704 20.924 89.076 22.292 89.076 23.828C89.076 25.412 88.704 26.84 87.96 28.112C87.216 29.36 86.196 30.344 84.9 31.064C83.604 31.784 82.14 32.144 80.508 32.144H75V41H69.168ZM83.136 41L76.728 29.624L82.992 28.724L90.12 41H83.136ZM75 27.464H79.968C80.592 27.464 81.132 27.332 81.588 27.068C82.068 26.78 82.428 26.384 82.668 25.88C82.932 25.376 83.064 24.8 83.064 24.152C83.064 23.504 82.92 22.94 82.632 22.46C82.344 21.956 81.924 21.572 81.372 21.308C80.844 21.044 80.196 20.912 79.428 20.912H75V27.464ZM100.186 41.324C98.5782 41.324 97.1382 40.904 95.8662 40.064C94.6182 39.2 93.6222 38.024 92.8782 36.536C92.1342 35.024 91.7622 33.32 91.7622 31.424C91.7622 29.48 92.1342 27.764 92.8782 26.276C93.6222 24.788 94.6422 23.624 95.9382 22.784C97.2342 21.92 98.7102 21.488 100.366 21.488C101.278 21.488 102.106 21.62 102.85 21.884C103.618 22.148 104.29 22.52 104.866 23C105.442 23.456 105.934 23.996 106.342 24.62C106.75 25.22 107.05 25.868 107.242 26.564L106.054 26.42V21.884H111.778V41H105.946V36.392L107.242 36.356C107.05 37.028 106.738 37.664 106.306 38.264C105.874 38.864 105.346 39.392 104.722 39.848C104.098 40.304 103.402 40.664 102.634 40.928C101.866 41.192 101.05 41.324 100.186 41.324ZM101.77 36.464C102.658 36.464 103.426 36.26 104.074 35.852C104.722 35.444 105.226 34.868 105.586 34.124C105.946 33.356 106.126 32.456 106.126 31.424C106.126 30.392 105.946 29.504 105.586 28.76C105.226 27.992 104.722 27.404 104.074 26.996C103.426 26.564 102.658 26.348 101.77 26.348C100.906 26.348 100.15 26.564 99.5022 26.996C98.8782 27.404 98.3862 27.992 98.0262 28.76C97.6662 29.504 97.4862 30.392 97.4862 31.424C97.4862 32.456 97.6662 33.356 98.0262 34.124C98.3862 34.868 98.8782 35.444 99.5022 35.852C100.15 36.26 100.906 36.464 101.77 36.464ZM116.861 41V21.884H122.333L122.513 25.772L121.361 26.204C121.625 25.34 122.093 24.56 122.765 23.864C123.461 23.144 124.289 22.568 125.249 22.136C126.209 21.704 127.217 21.488 128.273 21.488C129.713 21.488 130.925 21.788 131.909 22.388C132.893 22.964 133.637 23.84 134.141 25.016C134.645 26.168 134.897 27.584 134.897 29.264V41H129.101V29.732C129.101 28.964 128.993 28.328 128.777 27.824C128.561 27.32 128.225 26.948 127.769 26.708C127.337 26.444 126.797 26.324 126.149 26.348C125.645 26.348 125.177 26.432 124.745 26.6C124.313 26.744 123.941 26.972 123.629 27.284C123.317 27.572 123.065 27.908 122.873 28.292C122.705 28.676 122.621 29.096 122.621 29.552V41H119.777C119.105 41 118.529 41 118.049 41C117.569 41 117.173 41 116.861 41ZM145.256 35.384L143.132 31.064L152.06 21.884H159.656L145.256 35.384ZM139.712 41V14.36H145.472V41H139.712ZM152.672 41L145.94 32.288L150.008 29.12L159.476 41H152.672ZM162.571 41V21.884H168.331V41H162.571ZM165.451 18.104C164.371 18.104 163.519 17.852 162.895 17.348C162.295 16.82 161.995 16.076 161.995 15.116C161.995 14.252 162.307 13.544 162.931 12.992C163.555 12.44 164.395 12.164 165.451 12.164C166.531 12.164 167.371 12.428 167.971 12.956C168.571 13.46 168.871 14.18 168.871 15.116C168.871 16.004 168.559 16.724 167.935 17.276C167.335 17.828 166.507 18.104 165.451 18.104ZM173.744 41V21.884H179.216L179.396 25.772L178.244 26.204C178.508 25.34 178.976 24.56 179.648 23.864C180.344 23.144 181.172 22.568 182.132 22.136C183.092 21.704 184.1 21.488 185.156 21.488C186.596 21.488 187.808 21.788 188.792 22.388C189.776 22.964 190.52 23.84 191.023 25.016C191.528 26.168 191.78 27.584 191.78 29.264V41H185.984V29.732C185.984 28.964 185.876 28.328 185.66 27.824C185.444 27.32 185.108 26.948 184.652 26.708C184.22 26.444 183.68 26.324 183.032 26.348C182.528 26.348 182.06 26.432 181.628 26.6C181.196 26.744 180.824 26.972 180.512 27.284C180.2 27.572 179.948 27.908 179.756 28.292C179.588 28.676 179.504 29.096 179.504 29.552V41H176.66C175.988 41 175.412 41 174.932 41C174.452 41 174.056 41 173.744 41ZM205.343 49.28C203.783 49.28 202.223 49.052 200.663 48.596C199.127 48.14 197.879 47.552 196.919 46.832L198.935 42.8C199.439 43.136 199.991 43.424 200.591 43.664C201.215 43.928 201.863 44.132 202.535 44.276C203.207 44.42 203.891 44.492 204.587 44.492C205.811 44.492 206.807 44.312 207.575 43.952C208.343 43.592 208.919 43.04 209.303 42.296C209.687 41.576 209.879 40.664 209.879 39.56V36.356L210.995 36.536C210.827 37.328 210.407 38.048 209.735 38.696C209.087 39.344 208.283 39.872 207.323 40.28C206.363 40.664 205.343 40.856 204.263 40.856C202.535 40.856 200.987 40.46 199.619 39.668C198.275 38.852 197.207 37.736 196.415 36.32C195.647 34.88 195.263 33.224 195.263 31.352C195.263 29.432 195.647 27.74 196.415 26.276C197.183 24.788 198.239 23.624 199.583 22.784C200.927 21.92 202.439 21.488 204.119 21.488C204.839 21.488 205.523 21.572 206.171 21.74C206.843 21.908 207.455 22.136 208.007 22.424C208.583 22.688 209.087 23.012 209.519 23.396C209.975 23.756 210.335 24.152 210.599 24.584C210.887 25.016 211.079 25.46 211.175 25.916L209.987 26.204L210.203 21.884H215.675V39.452C215.675 41.012 215.435 42.392 214.955 43.592C214.499 44.816 213.815 45.848 212.903 46.688C212.015 47.552 210.935 48.2 209.663 48.632C208.391 49.064 206.951 49.28 205.343 49.28ZM205.487 36.392C206.423 36.392 207.227 36.188 207.899 35.78C208.595 35.348 209.123 34.76 209.483 34.016C209.867 33.272 210.059 32.396 210.059 31.388C210.059 30.38 209.867 29.504 209.483 28.76C209.123 27.992 208.595 27.404 207.899 26.996C207.227 26.564 206.423 26.348 205.487 26.348C204.575 26.348 203.783 26.564 203.111 26.996C202.439 27.404 201.911 27.992 201.527 28.76C201.167 29.504 200.987 30.38 200.987 31.388C200.987 32.396 201.167 33.272 201.527 34.016C201.911 34.76 202.439 35.348 203.111 35.78C203.783 36.188 204.575 36.392 205.487 36.392Z"
          fill="black"
        />
        <path
          d="M53.6667 6.25H43.5556V2.34375C43.5556 1.04492 42.5153 0 41.2222 0H14.7778C13.4847 0 12.4444 1.04492 12.4444 2.34375V6.25H2.33333C1.04028 6.25 0 7.29492 0 8.59375V14.0625C0 17.5488 2.1875 21.1328 6.01806 23.8965C9.08056 26.1133 12.8042 27.5195 16.7125 27.9687C19.7653 33.0566 23.3333 35.1562 23.3333 35.1562V42.1875H18.6667C15.2347 42.1875 12.4444 44.209 12.4444 47.6562V48.8281C12.4444 49.4727 12.9694 50 13.6111 50H42.3889C43.0306 50 43.5556 49.4727 43.5556 48.8281V47.6562C43.5556 44.209 40.7653 42.1875 37.3333 42.1875H32.6667V35.1562C32.6667 35.1562 36.2347 33.0566 39.2875 27.9687C43.2056 27.5195 46.9292 26.1133 49.9819 23.8965C53.8028 21.1328 56 17.5488 56 14.0625V8.59375C56 7.29492 54.9597 6.25 53.6667 6.25ZM9.65417 18.8281C7.28194 17.1094 6.22222 15.1953 6.22222 14.0625V12.5H12.4639C12.5611 15.6836 13.0278 18.4766 13.7083 20.918C12.2403 20.4102 10.8694 19.707 9.65417 18.8281V18.8281ZM49.7778 14.0625C49.7778 15.6348 48.0569 17.5879 46.3458 18.8281C45.1306 19.707 43.75 20.4102 42.2819 20.918C42.9625 18.4766 43.4292 15.6836 43.5264 12.5H49.7778V14.0625Z"
          fill="#FFD233"
        />
      </SVG>
      <Listranking>
        <Lista>
          {rank != null &&
            rank.map((p) => (
              <Rank key={p._id}>
                {" "}
                {p.name} - {p.linksCount} - links - {p.visitCount} visualizações
              </Rank>
            ))}
        </Lista>
      </Listranking>
      {auth.user == null && <H1>Crie sua conta para usar nosso serviço!</H1>}
    </div>
  );
}

const Lista = styled.ol``;

const SVG = styled.svg`
  margin-top: 70px;
`;

const Listranking = styled.div`
  width: 100%;
  display: block;
  position: relative;
  margin: 0 auto;
  margin-top: 57px;
  padding: 40px;
  border: 1px solid rgba(120, 177, 89, 0.25);
  box-shadow: 0px 4px 24px rgba(120, 177, 89, 0.12);
  border-radius: 24px 24px 0px 0px;
`;

const Rank = styled.li`
  font-weight: bolder;
  font-size: 22px;
  margin-bottom: 20px;

  &:last-child {
    margin-bottom: 0px;
  }
`;

const H1 = styled.h1`
  font-family: "Lexend Deca";
  font-style: normal;
  font-weight: 700;
  font-size: 36px;
  line-height: 45px;
  margin-top: 40px;
  text-align: center;
  margin-bottom: 40px;
`;
